import Link from 'next/link'
import Image from 'next/image'
import { getAllExperiments } from '@/lib/experiments.server'
import styles from './page.module.css'

export default async function Home() {
  const experiments = await getAllExperiments()

  return (
    <main className={styles.main}>
      <header className={styles.header}>
        <Link href="https://montek.dev" className={styles.logo}>
          <svg
            width="100"
            height="100"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 117 23"
          >
            <path d="M0.98 22V5.92H5.03L5.18 9.79L4.76 9.61C4.98 8.75 5.31 8.02 5.75 7.42C6.21 6.82 6.76 6.36 7.4 6.04C8.04 5.72 8.74 5.56 9.5 5.56C10.84 5.56 11.92 5.95 12.74 6.73C13.58 7.51 14.12 8.56 14.36 9.88L13.79 9.91C13.97 8.97 14.28 8.18 14.72 7.54C15.18 6.88 15.74 6.39 16.4 6.07C17.06 5.73 17.8 5.56 18.62 5.56C19.74 5.56 20.7 5.79 21.5 6.25C22.3 6.71 22.92 7.4 23.36 8.32C23.8 9.22 24.02 10.33 24.02 11.65V22H19.52V12.91C19.52 11.65 19.33 10.71 18.95 10.09C18.57 9.45 17.95 9.13 17.09 9.13C16.55 9.13 16.09 9.28 15.71 9.58C15.33 9.88 15.03 10.32 14.81 10.9C14.61 11.46 14.51 12.15 14.51 12.97V22H10.46V12.97C10.46 11.73 10.28 10.78 9.92 10.12C9.56 9.46 8.94 9.13 8.06 9.13C7.52 9.13 7.05 9.28 6.65 9.58C6.27 9.88 5.98 10.32 5.78 10.9C5.58 11.48 5.48 12.17 5.48 12.97V22H0.98ZM34.9009 22.36C33.2609 22.36 31.8309 22.02 30.6109 21.34C29.3909 20.64 28.4409 19.66 27.7609 18.4C27.0809 17.14 26.7409 15.66 26.7409 13.96C26.7409 12.26 27.0809 10.79 27.7609 9.55C28.4409 8.29 29.3909 7.31 30.6109 6.61C31.8309 5.91 33.2609 5.56 34.9009 5.56C36.5409 5.56 37.9709 5.91 39.1909 6.61C40.4109 7.31 41.3609 8.29 42.0409 9.55C42.7209 10.79 43.0609 12.26 43.0609 13.96C43.0609 15.66 42.7209 17.14 42.0409 18.4C41.3609 19.66 40.4109 20.64 39.1909 21.34C37.9709 22.02 36.5409 22.36 34.9009 22.36ZM34.9009 18.91C36.0209 18.91 36.8909 18.48 37.5109 17.62C38.1309 16.74 38.4409 15.52 38.4409 13.96C38.4409 12.4 38.1309 11.19 37.5109 10.33C36.8909 9.45 36.0209 9.01 34.9009 9.01C33.7809 9.01 32.9109 9.45 32.2909 10.33C31.6709 11.19 31.3609 12.4 31.3609 13.96C31.3609 15.52 31.6709 16.74 32.2909 17.62C32.9109 18.48 33.7809 18.91 34.9009 18.91ZM45.8628 22V5.92H49.9128L50.0928 10.63L49.5228 10.48C49.6828 9.28 50.0028 8.32 50.4828 7.6C50.9828 6.88 51.6028 6.36 52.3428 6.04C53.0828 5.72 53.8928 5.56 54.7728 5.56C55.9328 5.56 56.9128 5.81 57.7128 6.31C58.5328 6.81 59.1528 7.52 59.5728 8.44C60.0128 9.34 60.2328 10.41 60.2328 11.65V22H55.7328V13.15C55.7328 12.29 55.6628 11.56 55.5228 10.96C55.3828 10.36 55.1328 9.91 54.7728 9.61C54.4128 9.29 53.9128 9.13 53.2728 9.13C52.3328 9.13 51.6128 9.48 51.1128 10.18C50.6128 10.86 50.3628 11.85 50.3628 13.15V22H45.8628ZM69.808 22C68.148 22 66.928 21.62 66.148 20.86C65.368 20.08 64.978 18.85 64.978 17.17V2.14H69.478V16.63C69.478 17.41 69.638 17.94 69.958 18.22C70.298 18.5 70.798 18.64 71.458 18.64H73.708V22H69.808ZM62.398 9.28V5.92H73.708V9.28H62.398ZM83.3272 22.36C81.6872 22.36 80.2572 22.02 79.0372 21.34C77.8372 20.64 76.8972 19.66 76.2172 18.4C75.5572 17.14 75.2272 15.66 75.2272 13.96C75.2272 12.26 75.5572 10.79 76.2172 9.55C76.8972 8.29 77.8372 7.31 79.0372 6.61C80.2372 5.91 81.6572 5.56 83.2972 5.56C84.8972 5.56 86.2872 5.91 87.4672 6.61C88.6472 7.31 89.5572 8.31 90.1972 9.61C90.8572 10.91 91.1872 12.46 91.1872 14.26V15.16H79.8772C79.9372 16.44 80.2772 17.39 80.8972 18.01C81.5372 18.63 82.3772 18.94 83.4172 18.94C84.1772 18.94 84.8072 18.78 85.3072 18.46C85.8272 18.14 86.1972 17.65 86.4172 16.99L90.9472 17.26C90.5272 18.86 89.6372 20.11 88.2772 21.01C86.9172 21.91 85.2672 22.36 83.3272 22.36ZM79.8772 12.4H86.5672C86.5072 11.22 86.1772 10.34 85.5772 9.76C84.9972 9.18 84.2372 8.89 83.2972 8.89C82.3572 8.89 81.5772 9.2 80.9572 9.82C80.3572 10.42 79.9972 11.28 79.8772 12.4ZM93.9683 22V0.699999H98.4683V12.52L104.438 5.92H109.838L103.598 12.55L110.018 22H105.098L100.688 15.1L98.4683 17.47V22H93.9683ZM111.936 22V17.41H116.826V22H111.936Z" fill="white" />
          </svg>
        </Link>
      </header>

      <div className={styles.intro}>
        <p>
          ðŸ‘‹ Hi there. You are on Montek&apos;s experimental corner. Here you&apos;ll
          find all kinds of creative development related stuff.
        </p>
        <p>
          Take a look at the examples below.
          My{' '}
          <a href="https://github.com/montekkundan/montek-lab">
            github repo
          </a>
          .
        </p>
      </div>

      <h2 className={styles.sectionTitle}>Useful Links</h2>
      <ul className={styles.links}>
        <li>
          <a href="https://animations.dev/" className={styles.link}>
            <span className={styles.linkIcon}>
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8.86 6.19L6.19 8.86C6.13 8.92 6.08 9 6.05 9.08C6.01 9.16 6 9.25 6 9.33C6 9.42 6.01 9.51 6.05 9.59C6.08 9.67 6.13 9.74 6.19 9.81C6.26 9.87 6.33 9.92 6.41 9.95C6.49 9.99 6.58 10 6.67 10C6.75 10 6.84 9.99 6.92 9.95C7 9.92 7.08 9.87 7.14 9.81L9.81 7.14C9.93 7.01 10 6.84 10 6.67C10 6.49 9.93 6.32 9.81 6.19C9.68 6.07 9.51 6 9.33 6C9.16 6 8.98 6.07 8.86 6.19V6.19Z" fill="white" />
                <path d="M8.19 11.6L7.33 12.45C6.85 12.94 6.21 13.24 5.52 13.29C4.84 13.34 4.16 13.13 3.61 12.71C3.32 12.48 3.09 12.18 2.92 11.85C2.76 11.51 2.66 11.15 2.64 10.78C2.63 10.4 2.69 10.03 2.82 9.68C2.96 9.34 3.17 9.02 3.43 8.76L4.38 7.81C4.44 7.74 4.49 7.67 4.52 7.59C4.56 7.51 4.58 7.42 4.58 7.33C4.58 7.25 4.56 7.16 4.52 7.08C4.49 7 4.44 6.92 4.38 6.86C4.32 6.8 4.24 6.75 4.16 6.71C4.08 6.68 3.99 6.66 3.91 6.66C3.82 6.66 3.73 6.68 3.65 6.71C3.57 6.75 3.49 6.8 3.43 6.86L2.59 7.71C1.87 8.4 1.43 9.33 1.35 10.32C1.27 11.31 1.55 12.29 2.14 13.09C2.49 13.55 2.93 13.92 3.44 14.19C3.94 14.46 4.5 14.62 5.07 14.66C5.64 14.7 6.22 14.61 6.75 14.41C7.29 14.21 7.78 13.9 8.19 13.49L9.13 12.55C9.26 12.42 9.33 12.25 9.33 12.07C9.33 11.9 9.26 11.73 9.13 11.6C9.01 11.47 8.84 11.4 8.66 11.4C8.48 11.4 8.31 11.47 8.19 11.6V11.6Z" fill="white" />
                <path d="M13.11 2.15C12.3 1.55 11.31 1.27 10.31 1.35C9.31 1.44 8.38 1.88 7.69 2.6L6.97 3.33C6.89 3.39 6.82 3.47 6.77 3.56C6.71 3.65 6.68 3.74 6.67 3.84C6.66 3.95 6.67 4.05 6.7 4.15C6.73 4.24 6.79 4.33 6.85 4.41C6.92 4.47 6.99 4.52 7.07 4.55C7.15 4.59 7.24 4.6 7.33 4.6C7.42 4.6 7.5 4.59 7.58 4.55C7.66 4.52 7.74 4.47 7.8 4.41L8.67 3.53C9.14 3.04 9.79 2.74 10.47 2.69C11.16 2.64 11.84 2.84 12.38 3.27C12.67 3.5 12.91 3.8 13.08 4.13C13.24 4.47 13.34 4.84 13.36 5.21C13.37 5.58 13.31 5.96 13.17 6.31C13.04 6.66 12.83 6.97 12.56 7.23L11.61 8.19C11.55 8.25 11.5 8.32 11.47 8.4C11.43 8.48 11.42 8.57 11.42 8.66C11.42 8.75 11.43 8.84 11.47 8.92C11.5 9 11.55 9.07 11.61 9.13C11.68 9.2 11.75 9.25 11.83 9.28C11.91 9.31 12 9.33 12.09 9.33C12.18 9.33 12.26 9.31 12.34 9.28C12.42 9.25 12.5 9.2 12.56 9.13L13.51 8.19C13.91 7.78 14.22 7.29 14.42 6.76C14.62 6.22 14.71 5.65 14.67 5.08C14.63 4.51 14.47 3.95 14.2 3.44C13.93 2.94 13.56 2.5 13.11 2.15V2.15Z" fill="white" />
              </svg>
            </span>
            Learn web animations
          </a>
        </li>
        <li>
          <a href="https://threejs-journey.com/" className={styles.link}>
            <span className={styles.linkIcon}>
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8.86 6.19L6.19 8.86C6.13 8.92 6.08 9 6.05 9.08C6.01 9.16 6 9.25 6 9.33C6 9.42 6.01 9.51 6.05 9.59C6.08 9.67 6.13 9.74 6.19 9.81C6.26 9.87 6.33 9.92 6.41 9.95C6.49 9.99 6.58 10 6.67 10C6.75 10 6.84 9.99 6.92 9.95C7 9.92 7.08 9.87 7.14 9.81L9.81 7.14C9.93 7.01 10 6.84 10 6.67C10 6.49 9.93 6.32 9.81 6.19C9.68 6.07 9.51 6 9.33 6C9.16 6 8.98 6.07 8.86 6.19V6.19Z" fill="white" />
                <path d="M8.19 11.6L7.33 12.45C6.85 12.94 6.21 13.24 5.52 13.29C4.84 13.34 4.16 13.13 3.61 12.71C3.32 12.48 3.09 12.18 2.92 11.85C2.76 11.51 2.66 11.15 2.64 10.78C2.63 10.4 2.69 10.03 2.82 9.68C2.96 9.34 3.17 9.02 3.43 8.76L4.38 7.81C4.44 7.74 4.49 7.67 4.52 7.59C4.56 7.51 4.58 7.42 4.58 7.33C4.58 7.25 4.56 7.16 4.52 7.08C4.49 7 4.44 6.92 4.38 6.86C4.32 6.8 4.24 6.75 4.16 6.71C4.08 6.68 3.99 6.66 3.91 6.66C3.82 6.66 3.73 6.68 3.65 6.71C3.57 6.75 3.49 6.8 3.43 6.86L2.59 7.71C1.87 8.4 1.43 9.33 1.35 10.32C1.27 11.31 1.55 12.29 2.14 13.09C2.49 13.55 2.93 13.92 3.44 14.19C3.94 14.46 4.5 14.62 5.07 14.66C5.64 14.7 6.22 14.61 6.75 14.41C7.29 14.21 7.78 13.9 8.19 13.49L9.13 12.55C9.26 12.42 9.33 12.25 9.33 12.07C9.33 11.9 9.26 11.73 9.13 11.6C9.01 11.47 8.84 11.4 8.66 11.4C8.48 11.4 8.31 11.47 8.19 11.6V11.6Z" fill="white" />
                <path d="M13.11 2.15C12.3 1.55 11.31 1.27 10.31 1.35C9.31 1.44 8.38 1.88 7.69 2.6L6.97 3.33C6.89 3.39 6.82 3.47 6.77 3.56C6.71 3.65 6.68 3.74 6.67 3.84C6.66 3.95 6.67 4.05 6.7 4.15C6.73 4.24 6.79 4.33 6.85 4.41C6.92 4.47 6.99 4.52 7.07 4.55C7.15 4.59 7.24 4.6 7.33 4.6C7.42 4.6 7.5 4.59 7.58 4.55C7.66 4.52 7.74 4.47 7.8 4.41L8.67 3.53C9.14 3.04 9.79 2.74 10.47 2.69C11.16 2.64 11.84 2.84 12.38 3.27C12.67 3.5 12.91 3.8 13.08 4.13C13.24 4.47 13.34 4.84 13.36 5.21C13.37 5.58 13.31 5.96 13.17 6.31C13.04 6.66 12.83 6.97 12.56 7.23L11.61 8.19C11.55 8.25 11.5 8.32 11.47 8.4C11.43 8.48 11.42 8.57 11.42 8.66C11.42 8.75 11.43 8.84 11.47 8.92C11.5 9 11.55 9.07 11.61 9.13C11.68 9.2 11.75 9.25 11.83 9.28C11.91 9.31 12 9.33 12.09 9.33C12.18 9.33 12.26 9.31 12.34 9.28C12.42 9.25 12.5 9.2 12.56 9.13L13.51 8.19C13.91 7.78 14.22 7.29 14.42 6.76C14.62 6.22 14.71 5.65 14.67 5.08C14.63 4.51 14.47 3.95 14.2 3.44C13.93 2.94 13.56 2.5 13.11 2.15V2.15Z" fill="white" />
              </svg>
            </span>
            Three js Journey
          </a>
        </li>
      </ul>

      <h2 className={styles.sectionTitle}>Experiments</h2>
      <div className={styles.grid}>
        {experiments.map((exp) => (
          <Link href={exp.href || '#'} key={exp.filename} className={styles.card}>
            <div className={styles.cardContent}>
              <div className={styles.cardHeader}>
                <h3 className={styles.cardTitle}>{exp.title}</h3>
                <div className={styles.cardNumber}>#{exp.number}</div>
              </div>

              {exp.tags && exp.tags.length > 0 && (
                <div className={styles.tags}>
                  {exp.tags.map((tag) => (
                    <span key={tag} className={styles.tag}>
                      {tag}
                    </span>
                  ))}
                </div>
              )}

              {exp.contributors && exp.contributors.length > 0 && (
                <div className={styles.contributors}>
                  <div className={styles.contributorAvatars}>
                    {exp.contributors.map((contributor, index) => (
                      <div
                        key={contributor.id}
                        className={styles.contributorAvatar}
                        style={{ zIndex: (exp.contributors?.length ?? 0) - index }}
                      >
                        <Image
                          src={contributor.avatarUrl}
                          alt={contributor.name || 'Contributor'}
                          width={24}
                          height={24}
                          title={contributor.name || 'Contributor'}
                        />
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </div>
          </Link>
        ))}
      </div>
    </main>
  )
}
